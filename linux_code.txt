# Update proxy setttings
#unset http_proxy
#unset https_proxy

# Install Kubernetes
#sudo apt update
#sudo apt install docker.io
#sudo snap install microk8s --classic
#sudo apt-get install swapspace
#sudo apt-get update

# Install AWSCLI
sudo apt update
sudo apt install awscli

# Set up AWSCLI
# When asked for you default region enter “‘us-east-1" and when asked for your default output enter “‘json"
nano .aws/credentials

# Install PIP
sudo apt update
sudo apt install python3-pip

# Install REST Service
pip3 install Flask

# Install other libraries
pip3 install pyjwt
pip3 install requests
pip3 install requests-cache

# Install pyodbc
sudo apt-get install unixodbc-dev
pip3 install pyodbc

# Install docker, nginx and gcc
sudo apt install docker.io
sudo docker pull nginx
sudo apt-get install gcc

# Set up Git Repo
git init
git config user.name "guypwhunt"
git config user.email "guypwhunt1992@gmail.com"
git clone https://github.com/guypwhunt/cloud_computing

# Create a new working directory
cd cloud_computing

# Build the doker image
sudo docker build -t investment_app:v1 .
	
# Run the docker image
sudo docker run -p 80:80 investment_app:v1

# Deploying the application
#sudo microk8s kubectl create deployment test --image=investment_app --port=5000
#sudo microk8s.kubectl expose deployment test --type=LoadBalancer
#sudo microk8s.kubectl scale deployment test --replicas=10
#sudo microk8s.kubectl run test --image=investment_app #--port=5000
